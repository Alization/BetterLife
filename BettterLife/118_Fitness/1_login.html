<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="reset.css">
    <title>Sign Up</title>
</head>

<body>

    <!-- menu bar -->
    <div class="menu">
        <a href="0_home.html"><img src="img/logo.png"></a>
        <nav>
            <a href="1_Workout.html">WORKOUTS</a>
            <a href="1_Diet.html">DIET</a>
            <a href="0_Home.html#aboutUs">ABOUT US</a>
            <a href="1_login.html">LOGIN</a>
        </nav>
    </div>
    <!-- menu bar End-->

    <!-- Login -->
    <div class="login-page">
        <div class="form">
            <form id="login-form">
                <label> Email </label> <input id="email" type="email" name="email" required size="30" maxlength="30">
                <label> Username </label> <input id="username" type="text" name="Username" required size="20"
                    maxlength="20">
                <label> Password </label> <input id="password" type="password" name="password" required size="20"
                    maxlength="20">
                <button type="submit" id="form2" value="Submit">Login</button>
            </form>
            <p> New User? <a href="1_SignUp.html">Sign up</a> here </p>
        </div>
    </div>



    <script type="text/javascript">
        const form1 = document.getElementById("login-form");
        form1.addEventListener("submit", (e) => {
            e.preventDefault(); // https://www.w3schools.com/jsref/event_preventdefault.asp
            const request = new XMLHttpRequest();   // Create a new connection object.
            request.open("post", "/1_login");   // Define the URL to connect.
            request.onload = function () {    // Execute this function when the server responds.
                const json = JSON.parse(request.response);
                if (json.success) {
                    window.location.href = json.message;   // Redirect to user.html if successful login.
                } else {
                    window.alert(json.message);   // Display an alert if something goes wrong.
                }
            }

            var data = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                email: document.getElementById("email").value
            }
            request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");   // Add headers to the request.
            request.send(JSON.stringify(data));   // Send the request to the server along with data. Data contains information given by the user. 

        })
    </script>


</body>

</html>